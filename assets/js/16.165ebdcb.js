(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{382:function(a,t,s){"use strict";s.r(t);var e=s(17),o=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"getting-started-with-damocles"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getting-started-with-damocles"}},[a._v("#")]),a._v(" Getting started with damocles")]),a._v(" "),s("p",[a._v("This guide will walk you through how to qiuckly get started with damocles")]),a._v(" "),s("h2",{attrs:{id:"preparation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#preparation"}},[a._v("#")]),a._v(" Preparation")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("Install 3rd party dependencies. Please refer to instrcutions "),s("a",{attrs:{href:"https://lotus.filecoin.io/docs/set-up/install/#building-from-source",target:"_blank",rel:"noopener noreferrer"}},[a._v("here"),s("OutboundLink")],1),a._v(".")])]),a._v(" "),s("li",[s("p",[a._v("Download source code.")])])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/ipfs-force-community/damocles.git\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[a._v("Compile "),s("code",[a._v("damocles")]),a._v(" component.")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" damocles\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v(" all\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),s("p",[a._v("After completion, you should be able to find binaries for both "),s("code",[a._v("damocles-worker")]),a._v(" and "),s("code",[a._v("damocles-manager")]),a._v(".")])]),a._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[s("p",[a._v("Copy the binaries to your machine(s).")])]),a._v(" "),s("li",[s("p",[a._v("Copy "),s("code",[a._v("./damocles-worker/create-cgroup.sh")]),a._v(" to all "),s("code",[a._v("damocles-worker")]),a._v(" machine and execute the script under same user which you are going to run "),s("code",[a._v("damocles-worker")]),a._v(".")])])]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),s("p",[a._v("The script will generate "),s("code",[a._v("cgroup")]),a._v(" for the user, which allows "),s("code",[a._v("damocles-worker")]),a._v(" to allocate hardware resources accordingly.")])]),a._v(" "),s("h2",{attrs:{id:"mock-mode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mock-mode"}},[a._v("#")]),a._v(" Mock mode")]),a._v(" "),s("p",[a._v("By default, starting a set of "),s("code",[a._v("mock")]),a._v(" instance can be done by a series of commands.")]),a._v(" "),s("h3",{attrs:{id:"damocles-manager"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#damocles-manager"}},[a._v("#")]),a._v(" damocles-manager")]),a._v(" "),s("p",[a._v("For example, start "),s("code",[a._v("damocles-manager")]),a._v(" with a dummy miner actor "),s("code",[a._v("t010000")]),a._v(" and schedule sealing jobs with sector size of 2KiB.")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ ./dist/bin/damocles-manager mock --miner"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("10000")]),a._v(" --sector-size"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("2KiB\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),s("p",[s("code",[a._v("./mock/start_smgr.sh")]),a._v(" could also be used to do this.")])]),a._v(" "),s("h3",{attrs:{id:"damocles-worker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#damocles-worker"}},[a._v("#")]),a._v(" damocles-worker")]),a._v(" "),s("ol",[s("li",[a._v("Init both sealing and permanent storage.")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ ./dist/bin/damocles-worker store sealing-init -l ./mock-tmp/store1 ./mock-tmp/store2 ./mock-tmp/store3\n\n$ ./dist/bin/damocles-worker store file-init -l ./mock-tmp/remote\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),s("p",[s("code",[a._v("./mock/cleanup_store.sh")]),a._v(" could also be used to do this.")])]),a._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[a._v("Start "),s("code",[a._v("damocles-worker")]),a._v(" in "),s("code",[a._v("mock")]),a._v(" mode.")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ ./dist/bin/damocles-worker daemon -c ./damocles-worker/assets/damocles-worker.mock.toml\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),s("p",[s("code",[a._v("./mock/start_worker.sh")]),a._v(" could also be used to do this.")])]),a._v(" "),s("h2",{attrs:{id:"production-mode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#production-mode"}},[a._v("#")]),a._v(" Production mode")]),a._v(" "),s("h3",{attrs:{id:"damocles-manager-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#damocles-manager-2"}},[a._v("#")]),a._v(" damocles-manager")]),a._v(" "),s("ol",[s("li",[a._v("Init working directories.")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ ./dist/bin/damocles-manager daemon init\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[a._v("Configure "),s("code",[a._v("~/.damocles-manager/sector-manager.cfg")]),a._v(" per your use case.")])]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),s("p",[a._v("For more details on what each configuration does, please refer to "),s("a",{attrs:{href:"https://github.com/ipfs-force-community/damocles/blob/main/docs/en/04.damocles-manager-config.md",target:"_blank",rel:"noopener noreferrer"}},[a._v("this document"),s("OutboundLink")],1),a._v(".")])]),a._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[a._v("Start "),s("code",[a._v("damocles-manager")]),a._v(".")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ ./dist/bin/damocles-manager daemon run\n")])])]),s("h3",{attrs:{id:"damocles-worker-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#damocles-worker-2"}},[a._v("#")]),a._v(" damocles-worker")]),a._v(" "),s("ol",[s("li",[a._v("Init sealing path for unsealed sector(s).")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ ./dist/bin/damocles-worker store sealing-init -l "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("1")]),a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("3")]),a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("."),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[a._v("Init permanent storage path for sealed sector(s).")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ ./dist/bin/damocles-worker store file-init -l "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("1")]),a._v(">")]),a._v("\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[a._v("Configure your "),s("code",[a._v("damocles-worker")]),a._v(" according to your planning of CPU cores, numa, zone and etc for each sealing phases.")])]),a._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),s("p",[a._v("For more details on what each configuration does, please refer to "),s("a",{attrs:{href:"https://github.com/ipfs-force-community/damocles/blob/main/docs/en/03.damocles-worker-config.md",target:"_blank",rel:"noopener noreferrer"}},[a._v("this document"),s("OutboundLink")],1),a._v(".")])]),a._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[a._v("Start "),s("code",[a._v("damocles-worker")]),a._v(".")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ /path/to/damocles-worker daemon -c /path/to/damocles-worker.toml\n")])])])])}),[],!1,null,null,null);t.default=o.exports}}]);