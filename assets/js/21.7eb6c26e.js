(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{387:function(t,a,s){"use strict";s.r(a);var e=s(17),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"snapdeal-support"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#snapdeal-support"}},[t._v("#")]),t._v(" SnapDeal Support")]),t._v(" "),s("h2",{attrs:{id:"snapdeal-overview"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#snapdeal-overview"}},[t._v("#")]),t._v(" SnapDeal Overview")]),t._v(" "),s("p",[s("code",[t._v("SnapDeal")]),t._v(" is a sector upgrade proposal introduced in "),s("a",{attrs:{href:"https://github.com/filecoin-project/FIPs/blob/master/FIPS/fip-0019.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("FIP-19"),s("OutboundLink")],1),t._v(" and merged in "),s("code",[t._v("nv15")]),t._v(". Compared to previous upgrade proposals that required a complete re-seal process, SnapDeal is relatively lightweight. Its cost is approximately:")]),t._v(" "),s("ul",[s("li",[t._v("Completing an "),s("code",[t._v("add piece")]),t._v(" task")]),t._v(" "),s("li",[t._v("Completing a "),s("code",[t._v("tree d")]),t._v(" task")]),t._v(" "),s("li",[t._v("Completing a "),s("code",[t._v("snap_encode")]),t._v(" task, which costs about the same as a "),s("code",[t._v("pc2")]),t._v(" task")]),t._v(" "),s("li",[t._v("Completing a "),s("code",[t._v("snap_prove")]),t._v(" task, which costs about the same as a "),s("code",[t._v("c1")]),t._v(" + "),s("code",[t._v("c2")]),t._v(" task")])]),t._v(" "),s("p",[t._v("Therefore, SnapDeal is attractive for both first-time data onboarding and upgrading of existing "),s("code",[t._v("CC sectors")]),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"damocles-snapdeal-support"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#damocles-snapdeal-support"}},[t._v("#")]),t._v(" Damocles SnapDeal Support")]),t._v(" "),s("p",[s("code",[t._v("Damocles")]),t._v(" is designed to provide a way to mass produce storage power. For this purpose, we have introduced a SnapDeal production scheme that requires minimal human intervention, which we call "),s("code",[t._v("SnapUp")]),t._v(". The steps involved are as follows:")]),t._v(" "),s("ol",[s("li",[t._v("Import existing "),s("code",[t._v("CC sectors")]),t._v(" in batches as candidate sectors.")]),t._v(" "),s("li",[t._v("Configure "),s("code",[t._v("damocles-manager")]),t._v(" to enable "),s("code",[t._v("SnapUp")]),t._v(" mode for specified "),s("code",[t._v("SPs")]),t._v(".")]),t._v(" "),s("li",[t._v("Configure "),s("code",[t._v("sealing_thread")]),t._v(" of "),s("code",[t._v("damocles-worker")]),t._v(" to "),s("code",[t._v("SnapUp")]),t._v(" production plans or add new "),s("code",[t._v("sealing_thread")]),t._v(" for "),s("code",[t._v("SnapUp")]),t._v(".")])]),t._v(" "),s("p",[t._v("Throughout this process, users only need to focus on importing new candidate sectors and monitoring the remaining of candidate sectors, as all other processes will be automated.")]),t._v(" "),s("h2",{attrs:{id:"example"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("p",[t._v("Let's use an example of a production cluster on the "),s("code",[t._v("butterfly")]),t._v(" network to demonstrate how to configure the SnapUp production scheme.")]),t._v(" "),s("h3",{attrs:{id:"importing-candidate-sectors"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#importing-candidate-sectors"}},[t._v("#")]),t._v(" Importing Candidate Sectors")]),t._v(" "),s("p",[t._v("Using the newly added "),s("code",[t._v("util sealer snap fetch")]),t._v(" tool, you can import "),s("code",[t._v("CC sectors")]),t._v(" that meet the "),s("code",[t._v("SnapUp")]),t._v(" condition (remaining lifetime greater than 180 days and satisfying the minimum lifetime requirement for storage deals) as candidate sectors per their deadlines.")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('./dist/bin/damocles-manager util sealer snap fetch 1153 3\n2022-04-15T04:28:03.380Z        DEBUG   policy  policy/const.go:18      NETWORK SETUP   {"name": "butterfly"}\n2022-04-15T04:28:03.401Z        INFO    cmd     internal/util_sealer_snap.go:53 candidate sectors fetched        {"available-in-deadline": 2, "added": 2}\n')])])]),s("h3",{attrs:{id:"monitoring-remaining-candidate-sector"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#monitoring-remaining-candidate-sector"}},[t._v("#")]),t._v(" Monitoring Remaining Candidate Sector")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('./dist/bin/damocles-manager util sealer snap candidates 1153\n2022-04-15T04:28:13.955Z        DEBUG   policy  policy/const.go:18      NETWORK SETUP   {"name": "butterfly"}\ndeadline  count\n3         2\n')])])]),s("p",[t._v("In the above example, there are currently 2 "),s("code",[t._v("CC sectors")]),t._v(" available in the "),s("code",[t._v("#3 deadline")]),t._v(" as candidates for upgrade.")]),t._v(" "),s("h3",{attrs:{id:"configuring-damocles-worker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuring-damocles-worker"}},[t._v("#")]),t._v(" Configuring damocles-worker")]),t._v(" "),s("p",[t._v("In "),s("code",[t._v("damocles-worker")]),t._v(", the main configurations required related to "),s("code",[t._v("SnapUp")]),t._v(" job are the resource allocation for "),s("code",[t._v("snap_encode")]),t._v(" and "),s("code",[t._v("snap_prove")]),t._v(" tasks in "),s("code",[t._v("sealing_thread")]),t._v(".")]),t._v(" "),s("p",[t._v("Here is an example configuration:")]),t._v(" "),s("div",{staticClass:"language-toml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-toml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("sealing_thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("location")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/data/local-snap-1"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("plan")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"snapup"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("sealing_thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("location")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/data/local-snap-2"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("plan")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"snapup"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("sealing_thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("location")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/data/local-snap-3"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("plan")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"snapup"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("sealing_thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("location")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/data/local-snap-4"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("plan")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"snapup"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("sealing_thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("location")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/data/local-snap-5"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("plan")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"snapup"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("sealing_thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("location")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/data/local-snap-6"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("plan")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"snapup"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("sealing_thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("location")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/data/local-snap-6"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("plan")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"snapup"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("processors.limitation.concurrent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("tree_d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("snap_encode")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("snap_prove")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("processors.snap_encode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("envs")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("FIL_PROOFS_USE_GPU_COLUMN_BUILDER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("FIL_PROOFS_USE_GPU_TREE_BUILDER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("CUDA_VISIBLE_DEVICES")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("TMPDIR")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/var/tmp/worker0"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("processors.snap_prove")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("envs")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("CUDA_VISIBLE_DEVICES")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("TMPDIR")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/var/tmp/worker0"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("processors.snap_encode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("envs")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("FIL_PROOFS_USE_GPU_COLUMN_BUILDER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("FIL_PROOFS_USE_GPU_TREE_BUILDER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("CUDA_VISIBLE_DEVICES")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("TMPDIR")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/var/tmp/worker1"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("processors.snap_prove")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("envs")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("CUDA_VISIBLE_DEVICES")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("TMPDIR")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/var/tmp/worker1"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("The resource allocation for "),s("code",[t._v("snap_encode")]),t._v(" can be similar to "),s("code",[t._v("pc2")]),t._v(", and for "),s("code",[t._v("snap_prove")]),t._v(", it can be similar to "),s("code",[t._v("c2")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"configuring-damocles-manager"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuring-damocles-manager"}},[t._v("#")]),t._v(" Configuring damocles-manager")]),t._v(" "),s("p",[t._v("In "),s("code",[t._v("damocles-manager")]),t._v(", the required configuration mainly involves enabling "),s("code",[t._v("SnapUp")]),t._v(" for specific "),s("code",[t._v("SPs")]),t._v(". Here is an example:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('[[Miners]]\nActor = 1153\n[Miners.Sector]\nInitNumber = 0\nMaxNumber = 10000\nEnabled = true\nEnableDeals = false\n\n[Miners.SnapUp]\nEnabled = true\nSender = "t1abjxfbp274xpdqcpuaykwkfb43omjotacm2p3za"\n')])])]),s("p",[t._v("In this configuration:")]),t._v(" "),s("ul",[s("li",[t._v("The settings in "),s("code",[t._v("[Miners.Sector]")]),t._v(" do not affect SnapUp production.")]),t._v(" "),s("li",[t._v("Under this example configuration, you would get...\n"),s("ul",[s("li",[t._v("continuous production of "),s("code",[t._v("CC")]),t._v(" Sector")]),t._v(" "),s("li",[t._v("SnapUp continues production while there are available candidate sectors")])])])]),t._v(" "),s("h3",{attrs:{id:"tips"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tips"}},[t._v("#")]),t._v(" Tips")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Considering the computing resources required by "),s("code",[t._v("snap_encode")]),t._v(" and "),s("code",[t._v("snap_prove")]),t._v(", if you enable regular sector sealing and "),s("code",[t._v("SnapUp")]),t._v(" at the same time in the same "),s("code",[t._v("damocles-worker")]),t._v(" instance, you may encounter race condition of hardware resource. You can refer to 07.damocles-worker external executor configuration example (En doc to be updated).")])]),t._v(" "),s("li",[s("p",[t._v("Considering the deployment of sector persistent storage, the "),s("code",[t._v("damocles-worker")]),t._v(" used for "),s("code",[t._v("SnapUp")]),t._v(" needs to be able to have both read and write access to all persistent storage spaces (persist stores), and ensure that their names are consistent with those defined in "),s("code",[t._v("damocles-manager")]),t._v(".")])]),t._v(" "),s("li",[s("p",[t._v("Based on the above two points, we recommend using a separate box specifically for "),s("code",[t._v("SnapUp")]),t._v(" production to avoid the configuration, operation and maintenance complexity caused by mixing regular sectors and "),s("code",[t._v("SnapUp")]),t._v(" sealing.")])])]),t._v(" "),s("h2",{attrs:{id:"continuous-improvement"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#continuous-improvement"}},[t._v("#")]),t._v(" Continuous Improvement")]),t._v(" "),s("p",[t._v("The improvement and optimization of the "),s("code",[t._v("SnapUp")]),t._v(" solution are still in progress. Currently we are mainly focusing on:")]),t._v(" "),s("ul",[s("li",[t._v("Convert semi-automatic candidate sector import to automatic mode, or provide equivalent operation and maintenance tools")]),t._v(" "),s("li",[t._v("More candidate sector import rules, such as import by storage configuration")]),t._v(" "),s("li",[t._v("Aggregation of on-chain messages to reduce costs")]),t._v(" "),s("li",[t._v("Other optimizations and tooling that can simplify operation & maintenance, reduce costs, and improve efficiency")])])])}),[],!1,null,null,null);a.default=n.exports}}]);